<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Test Finale AR</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@master/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <div style="position: fixed; top: 10px; left: 10px; z-index: 10; color: white; background: rgba(0,0,0,0.5); padding: 5px; font-family: sans-serif;">
      Stato: <span id="status">Caricamento...</span>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">
      
      <a-marker preset="hiro" id="hiro-marker">
        <a-box position="0 0.5 0" material="color: neon; opacity: 0.8;" animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"></a-box>
        <a-text value="VISTO!" color="cyan" align="center" position="0 1.2 0" rotation="-90 0 0" scale="2 2 2"></a-text>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      // Semplice script per capire se la camera Ã¨ partita
      window.addEventListener('camera-init', () => {
        document.getElementById('status').innerText = 'CAMERA ATTIVA - Inquadra Hiro';
        document.getElementById('status').style.color = 'lime';
      });
      
      window.addEventListener('camera-error', (err) => {
        document.getElementById('status').innerText = 'ERRORE CAMERA: ' + err.name;
        document.getElementById('status').style.color = 'red';
      });

      const marker = document.querySelector('#hiro-marker');
      marker.addEventListener('markerFound', () => {
        document.getElementById('status').innerText = 'MARKER TROVATO!';
        document.getElementById('status').style.color = 'yellow';
      });
    </script>
  </body>
</html>
